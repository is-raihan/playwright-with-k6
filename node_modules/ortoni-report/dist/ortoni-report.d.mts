import { Reporter, FullConfig, Suite, TestCase, TestResult, TestError, FullResult } from '@playwright/test/reporter';

/**
 * Configuration options for OrtoniReport.
 */
interface OrtoniReportConfig {
    /**
     * Open the report in local host (Trace viewer is accessible only in localhost)
     * @example "always"| "never"| "on-failure";
     * @default "never"
     */
    open?: "always" | "never" | "on-failure";
    /**
     * The title of the HTML report.
     * @example "Ortoni Playwright Test Report"
     */
    title?: string;
    /**
     * Add project on the list of the tests? (Filtering projects still works if hidden)
     * @example true to display, false to hide.
     * @default false
     */
    showProject?: boolean;
    /**
     * The name of the project.
     * @example "Ortoni Project"
     */
    projectName?: string;
    /**
     * The name of the author.
     * @example "Koushik Chatterjee"
     */
    authorName?: string;
    /**
     * The type of tests being run.
     * @example "Regression"
     */
    testType?: string;
    /**
     * If true, images will be encoded in base64.
     * Not recommended to use if many screenshots are present.
     * @default false
     * @example true
     */
    base64Image?: boolean;
    /**
     * The local relative of the logo image.
     * Recommended to keep within the report genrated folder.
     * @default "ortoni-report/logo.png"
     * @example "logo.png"
     */
    logo?: string;
    /**
     * The filename to the html report.
     * @example "index.html"
     * @default "ortoni-report.html"
     */
    filename?: string;
    /**
     * The folder name.
     * @example "report"
     * @default "ortoni-report"
     */
    folderPath?: string;
    /**
     * Port to connect
     * @example 3600
     */
    port?: number;
    /**
     * Display console logs?
     * @example boolean
     * @default true
     */
    stdIO?: boolean;
    /**
     * Metadata for the report. ['Test Cycle': 'Cycle 1', 'Test Environment':'QA', etc]
     * @example { "key": "value" } as string
     */
    meta?: Record<string, string>;
    /**
     * Save the history of the reports in a SQL file to be used in future reports.
     * The history file will be saved in the report folder.
     * @default true
     * @example false (to disable)
     */
    saveHistory?: boolean;
}

declare class OrtoniReport implements Reporter {
    private ortoniConfig;
    private testResultProcessor;
    private htmlGenerator;
    private fileManager;
    private serverManager;
    private results;
    private projectSet;
    private overAllStatus;
    private folderPath;
    private outputFilename;
    private outputPath;
    private dbManager;
    private shouldGenerateReport;
    private showConsoleLogs;
    private skipTraceViewer;
    private shardConfig;
    constructor(ortoniConfig?: OrtoniReportConfig);
    private reportsCount;
    onBegin(config: FullConfig, _suite: Suite): Promise<void>;
    onStdOut(chunk: string | Buffer, _test: void | TestCase, _result: void | TestResult): void;
    onTestEnd(test: TestCase, result: TestResult): void;
    printsToStdio(): boolean;
    onError(error: TestError): void;
    onEnd(result: FullResult): Promise<void>;
    onExit(): Promise<void>;
}

export { OrtoniReport, type OrtoniReportConfig, OrtoniReport as default };
